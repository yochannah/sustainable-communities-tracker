# Sustainable communities tracker

[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.8082469.svg)](https://doi.org/10.5281/zenodo.8082469) 
[![Node.js CI](https://github.com/yochannah/sustainable-communities-tracker/actions/workflows/node.js.yml/badge.svg)](https://github.com/yochannah/sustainable-communities-tracker/actions/workflows/node.js.yml)

This code was used in a year-long study looking at CHAOSS and other sustainability metrics that might affect open communities that user version control hosting sites for collaboration. This mostly ended up being and/or open source, open science communities, and mostly on GitHub. 

## Code components

There are two main components within this code. 

1. One is the **data visualisation component**, which runs on [Jekyll](https://jekyllrb.com/), with lots of javascript-based processing, since Jekyll can generate static sites but doesn't always allow advanced data manipulation. The entry point for this section is in the `view` folder.
2. The second is the **data collection component**. This is fully written in Javascript. The entry point is in index.js in this folder. 

## Data collection
### To set up

1. You'll need a recent version of node. Run `npm install` to get the dependencies.
2. in your .bashrc or .zshrc set up a githup api access token. It should look somethingg like this: `EXPORT github_sustain_sw_token=123456678sdfsdfsdfsdfsdfsdf`
3. run `node index.js` in yer terminal

### To grab various github api stats

1. Full run, on ALL the repos you have in a text file, separated by newlines: 
    ```bash
    node index.js --month 12 --urlList /path/to/urllist.txt
    ```

## Data visualisation component

Once you've run stats on a repo, there's a minimal UI to view the json and data more visually. To use it:

1. copy files generated by this script to `view/_data`
2. set up [jekyll](https://jekyllrb.com/docs/installation/) if you haven't already (`gem install jekyll bundler`). I use [rvm](https://rvm.io/) to manage ruby versions, it makes things easier.
3. once it's all set up, cd into the view directory `cd view` and run `bundle exec jekyll serve` - presto, you'll serve the visualisations.
